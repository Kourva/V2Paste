#: import FadeTransition kivy.uix.screenmanager.FadeTransition

<ExitPopup@Popup>:
    size_hint: 0.6, 0.25
    auto_dismiss: False
    canvas:
        Color:
            group: "outline-color"
            rgba: 0, .110, .175, 1
        Line:
            width: 1.1
            rounded_rectangle:
                ( \
                self.x, self.y, self.width, self.height, \
                5, 5, 5, 5, \
                self.height \
                )

    title: "Exit?"
    title_size: '20sp'
    title_align: 'center'
    title_font: 'Assets/font.ttf'
    separator_color: "aa0000"
    background: "Assets/map_blur.png"
    overlay_color: "000000ee"

    BoxLayout:
        orientation: 'vertical'
        padding: 10

        Label:
            text: "You sure about exit?"
            markup: True 
            font_name: "Assets/font.ttf"

        BoxLayout:
            size_hint_y: None
            height: "40dp"
            spacing: "10dp"

            Button:
                text: "Yes"
                markup: True 
                font_name: "Assets/font.ttf"
                background_color: "#ff000022"
                background_normal: ''
                background_down: 'ff000011'
                canvas:
                    Color:
                        group: "outline-color"
                        rgba: 0, .110, .175, 1
                    Line:
                        width: 1.1
                        rounded_rectangle:
                            ( \
                            self.x, self.y, self.width, self.height, \
                            5, 5, 5, 5, \
                            self.height \
                            )
                on_release: app.stop()

            Button:
                text: "No"
                markup: True 
                font_name: "Assets/font.ttf"
                background_color: "#0000ff22"
                background_normal: ''
                background_down: "#0000ff22"
                canvas:
                    Color:
                        group: "outline-color"
                        rgba: 0, .110, .175, 1
                    Line:
                        width: 1.1
                        rounded_rectangle:
                            ( \
                            self.x, self.y, self.width, self.height, \
                            5, 5, 5, 5, \
                            self.height \
                            )
                on_release: root.dismiss()

<QRcodePopup@Popup>:
    size_hint: 0.7, 0.45
    auto_dismiss: True
    canvas:
        Color:
            group: "outline-color"
            rgba: 0, .110, .175, 1
        Line:
            width: 1.1
            rounded_rectangle:
                ( \
                self.x, self.y, self.width, self.height, \
                5, 5, 5, 5, \
                self.height \
                )

    title: "QRcode"
    title_size: '20sp'
    title_align: 'center'
    title_font: 'Assets/font.ttf'
    separator_color: 0, .110, .175, 1
    background: "Assets/map_blur.png"
    overlay_color: "000000ee"

    BoxLayout:
        orientation: 'vertical'
        padding: 10

        ImageButton:
            id: Proxy_QRcode
            source: "Assets/map.png"
            size_hint_y: None  
            height: self.width

<MainMenu>

    canvas.before:
        Color:
            rgba: 0, 0, 0, 0
        Rectangle:
            pos: self.pos
            size: self.size

    FloatLayout:

        ImageButton:
            size_hint: 1, 0.6
            pos_hint: {"center_x": 0.5, "center_y": 0.7}
            source: "Assets/map_blur.png"

        ImageButton:
            size_hint: 0.2, 0.1
            pos_hint: {"center_x": 0.125, "center_y": 0.95}
            source: "Assets/close.png"
            on_release:
                root.show_exit_popup()
        Label:
            size_hint: 1, 0.1
            pos_hint: {"center_x": 0.125, "center_y": 0.90}
            text: "Close"
            font_size: "12sp"
            color: "#aaaaaa"
            font_name: root.font

        ImageButton:
            size_hint: 0.2, 0.1
            pos_hint: {"center_x": 0.875, "center_y": 0.95}
            source: "Assets/settings.png"
            on_release:
                root.load_config()
                root.manager.transition = FadeTransition(duration=0.09)
                root.manager.current = 'Settings'
        Label:
            size_hint: 1, 0.1
            pos_hint: {"center_x": 0.875, "center_y": 0.90}
            text: "Settings"
            font_size: "12sp"
            color: "#aaaaaa"
            font_name: root.font

        ImageButton:
            size_hint: 0.2, 0.1
            pos_hint: {"center_x": 0.375, "center_y": 0.95}
            source: "Assets/clone.png"
            on_release:
                root.manager.transition = FadeTransition(duration=0.09)
                root.manager.current = 'CloneMenu'
        Label:
            size_hint: 1, 0.1
            pos_hint: {"center_x": 0.375, "center_y": 0.90}
            text: "Clone"
            font_size: "12sp"
            color: "#aaaaaa"
            font_name: root.font

        ImageButton:
            size_hint: 0.2, 0.1
            pos_hint: {"center_x": 0.625, "center_y": 0.95}
            source: "Assets/decode.png"
            on_release:
                root.manager.transition = FadeTransition(duration=0.09)
                root.manager.current = 'DecodeMenu'
        Label:
            size_hint: 1, 0.1
            pos_hint: {"center_x": 0.625, "center_y": 0.90}
            text: "Decode"
            font_size: "12sp"
            color: "#aaaaaa"
            font_name: root.font

        Label:
            size_hint: 1, 0.1
            pos_hint: {"center_x": 0.5, "center_y": 0.8}
            text: "Fill requirements from setting and generate proxies"
            color: "#ffffff"
            font_name: root.font

        GridLayout:
            size_hint: .9, None
            height: "40dp"
            pos_hint: {"center_x": 0.5, "center_y": 0.7}
            cols: 2
            spacing: 3
            padding: 3
            canvas:
                Color:
                    group: "outline-color"
                    rgba: 0, 0.110, 0.175, 1

                Line:
                    width: 1.1
                    rounded_rectangle: self.x, self.y, self.width, self.height, 5, 5, 5, 5, self.height

            Button:
                text: "Generate Vmess"
                size_hint_x: 0.5
                markup: True 
                font_name: "Assets/font.ttf"
                background_color: "#ff000022"
                background_normal: ''
                background_down: 'ff000011'
                on_release:
                    root.generate_vmess()

            Button:
                text: "Generate Vless"
                size_hint_x: 0.5
                markup: True 
                font_name: "Assets/font.ttf"
                background_color: "#ff000022"
                background_normal: ''
                background_down: 'ff000011'
                on_release:
                    root.generate_vless()

        ScrollView:
            pos_hint: {"center_x": 0.5, "center_y": 0.5}
            size_hint: 0.9, 0.3
            do_scroll_x: False
            bar_color: "#008080"
            bar_width: 1
            canvas:
                Color:
                    group: "outline-color"
                    rgba: 0, 0.110, 0.175, 1

                Line:
                    width: 1.1
                    rounded_rectangle: self.x, self.y, self.width, self.height, 0, 0, 5, 5, self.height

            GridLayout:
                cols: 1
                size_hint: 1, None
                height: self.minimum_height
                spacing: "10dp"

                Label:
                    id: Proxy_Output
                    text: "All generated proxies will be shown here.\n\nYou can select how many proxies you want from 2 proxies to 50 proxies.\nYou can copy generated proxies by clicking on Copy button next to generated proxies.\n\nYou have to select your proxy mode and supported proxies are:\n    + Vless\n    + Vmess."
                    markup: True 
                    font_name: "RobotoMono-Regular.ttf"
                    size_hint_y: None
                    height: self.texture_size[1]
                    text_size: self.width, None
                    padding: 10, 10

                BoxLayout:
                    size_hint_y: None
                    height: "40dp"
                    spacing: "1dp"

                    Button:
                        pos_hint: {"center_x": 0.5}
                        text: "Copy to clipboard"
                        height: "40dp"
                        size_hint_y: None
                        padding: 10, 10
                        markup: True 
                        font_name: "Assets/font.ttf"
                        background_color: "#008080"
                        background_normal: ''
                        background_down: 'ff000011'
                        color: "#ffffff"
                        on_release:
                            root.copy_to_clipboard(Proxy_Output)

                    Button:
                        pos_hint: {"center_x": 0.5}
                        text: "Show QRcode"
                        height: "40dp"
                        size_hint_y: None
                        padding: 10, 10
                        markup: True 
                        font_name: "Assets/font.ttf"
                        background_color: "#008080"
                        background_normal: ''
                        background_down: 'ff000011'
                        color: "#ffffff"
                        on_release:
                            root.Show_Qrcode_popup()

        ImageButton:
            size_hint: 0.9, 0.3
            pos_hint: {"center_x": 0.5, "center_y": 0.16}
            source: "Assets/map.png"
